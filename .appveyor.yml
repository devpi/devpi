# https://www.appveyor.com/docs/lang/python
# https://www.appveyor.com/docs/windows-images-software/#python

image:
  - Visual Studio 2022

environment:
  matrix:
    - PROJECT: "common"
    - PROJECT: "server"
    - PROJECT: "web"
    - PROJECT: "client"

install:
  - git config core.symlinks true
  - git reset --hard

  - echo Install PyPy3.10
  - ps: (New-Object Net.WebClient).DownloadFile('https://downloads.python.org/pypy/pypy3.10-v7.3.12-win64.zip', "$env:appveyor_build_folder\pypy3.10-v7.3.12-win64.zip")
  - ps: 7z x pypy3.10-v7.3.12-win64.zip | Out-Null
  - ps: $env:path = "$env:appveyor_build_folder\pypy3.10-v7.3.12-win64;$env:path"
  - pypy --version ; pypy3 --version

  - echo Installed Pythons
  - py --list
  - py -3.11 -m pip install --upgrade pip
  - py -3.11 -m pip install --upgrade --force-reinstall tox

build: false

test_script:
  - cd "%PROJECT%"
  - py -3.11 -m tox --skip-missing-interpreters
